<!DOCTYPE html>

<html lang="en">


<head>


    <meta charset="UTF-8">


    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title>Barcode Scanner</title>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>


</head>


<body>


    <video id="video" width="600" height="400" autoplay></video>


    <script>


        async function startVideo() {


            const video = document.getElementById('video');


            try {


                const stream = await navigator.mediaDevices.getUserMedia({ video: true });


                video.srcObject = stream;


                initQuagga();


            } catch (err) {


                alert('Unable to access the camera. Please check your permissions.');


                console.error('Error accessing the camera', err);


            }


        }


        function initQuagga() {


            Quagga.init({


                inputStream: {


                    name: "Live",


                    type: "LiveStream",


                    target: document.querySelector('#video')


                },


                decoder: {


                    readers: ["code_128_reader", "ean_reader", "upc_reader"]


                }


            }, function (err) {


                if (err) {


                    console.log(err);


                    return;


                }


                console.log("Initialization finished. Ready to start");


                Quagga.start();


            });


            Quagga.onDetected(function(data) {


                console.log(data.codeResult.code);


            });


        }


        startVideo();


    </script>


</body>


</html>
